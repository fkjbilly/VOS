@model VOS.ViewModel.Business.VOS_PEmployeeVMs.VOS_PEmployeeListVM
@inject IStringLocalizer<WalkingTec.Mvvm.Core.Program> Localizer;
<wt:searchpanel vm="@Model" reset-btn="true">
    <wt:row items-per-row="ItemsPerRowEnum.Three">
        <wt:textbox field="Searcher.FullName" />
        <wt:textbox field="Searcher.Mobile" />
        <wt:textbox field="Searcher.WeChat" />
        <wt:textbox field="Searcher.TaobaAccount" />
        <wt:textbox field="Searcher.JDAccount" />
        <wt:combobox field="Searcher.PEstate" />
    </wt:row>
</wt:searchpanel>
<input type="hidden" id="rwid" value="@ViewBag.id" />
<wt:grid vm="@Model" name="_PEmployee" url="/Business/VOS_PEmployee/Search" hidden-checkbox="true" hidden-grid-index="true"  hidden-panel="true" />
<script type="text/javascript">
    var table, layer;
    layui.use(['table', 'layer'], function () {
        table = layui.table;
        layer = layui.layer;
    });
    function SelectBrushHand(id) {
        $.post('@Url.Action("BrushHand", "VOS_Task")', { "ID": $("#rwid").val(), "BrushHandID": id }, function (r) {
            layer.msg(r.Msg, {
                icon: r.Data,
                time: 1500,
            }, function () {
                parent.layui.table.reload($('table')[0].id);
                layer.closeAll();
            });
        });
    }

    function ResetBrushHand() {
         $.post('@Url.Action("ResetBrushHand", "VOS_Task")', { "ID": $("#rwid").val() }, function (r) {
            if (r.Data) {
                layer.msg('已重派', {
                    icon: 1,
                    time:1000,
                }, function () {
                   table.reload($('table[name="_PEmployee"]')[0].id);
                   parent.layui.table.reload($('table')[0].id);
                });
            } else {
                layer.msg('发生错误，联系管理员', { icon: 2 });
            }
         });
    }
</script>